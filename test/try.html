<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="../dist/index.js"></script>
</head>
<body>
    


</body>

<script>

    /** then **/
    //  var p1 = new Promise2(function(resolve,reject){
    //      console.log(1)
    //      setTimeout(()=>{
    //         resolve(5)
    //     },200)
    //  });  

    //  p1.then(value=>{
    //      console.log(value)
    //  })


    //  var p1 = new Promise(function(resolve,reject){
    //      console.log(1)
    //      setTimeout(()=>{
    //          console.log(2)
    //          resolve()
    //          p1.then(function(value){
    //     console.log(value)
    //     return value
    // }).then(function(value){
    //     console.log(`${value}2`)
    // })

    //     },200)
    //  });  
     
    

    //  var p1 = new Promise(function(resolve,reject){
    //      console.log(1)
    //      setTimeout(()=>{
    //          console.log(2)
    //          reject(3)
    //     },200)
    //  })

    // p1.then(function(value){
    //     console.log(value)
    //     return value
    // }).finally(function(value){
    //     console.log(`${value}2`)
    // })

 
    /** catch **/


// var promise = new Promise2(function(resolve, reject) {
//   throw new Error('test');
// });
// promise.catch(function(error) {
//     console.log(error);
// })

// var promise = new Promise2(function(resolve, reject) {
//   resolve(33)
// });
// promise.catch(function(error) {
//     return error;
// }).then(value=>{
//     console.log(value)
// })





/** resolve **/

// var p1 = new Promise2(function(resolve,reject){
//          console.log(1)
//          setTimeout(()=>{
//              console.log(2)
//              resolve('lala')
//         },200)
//      }); 
// Promise2.resolve(p1).then(function(value){
//     console.log(value)
// })


// Promise2.resolve({then:function(resolve,reject){resolve('555')}}).then(function(value){
//     console.log(value);
// })

//  var p = Promise.resolve();
//  p.then(function(value){
//     console.log(value)
// })
// Promise.resolve(p1).then(function(value){
//     console.log(p1)
// })



/** finally **/

//  var p1 = new Promise2(function(resolve,reject){
//          console.log(1)
//          setTimeout(()=>{
//              console.log(2)
//              resolve('lala')
//         },200)
//      });   

//      p1.finally(function(value){
//             console.log(value)
//             return value
//         }).then(function(value){
//         console.log(`${value}2`)
//      })

// let p = new Promise2(function(resolve){
//             resolve()
//         });

//         p.then().catch().finally(()=>{
// 			    console.log(5)
//         })

// let p = new Promise2(function(resolve,reject){
//       reject('dd')
// });

//   p
//   // .then()
//   // .catch()
//   .finally(()=>{
//       console.log('finally');
//   })

// let p = new Promise2(function(resolve){
//             resolve()
//         });

//         p.then().catch().finally(()=>{
//             console.log('finally')
//         })

/** **/
//  Promise.reject('nofail')
//  .catch(err=>{
//      console.log(err);
//  });
//  console.log(Promise);

 /** all **/
 // 生成一个Promise对象的数组
// const promises = [2, 3, 5, 7, 11, 13].map(function (id) {
//   return new Promise2(function(resolve,reject){
//     setTimeout(()=>{
//         resolve(id);
//     },id);
//   })
// });

// promises.push('ddd');

// promises.push(new Promise(function(resolve,reject){
//   setTimeout(()=>{
//     throw 'dd'
//   },20)
// }))

// Promise2.all(promises).then(function (posts) {
//   console.log(posts);
// }).catch(function(reason){
//   // ...
// });

/** race **/

// const promises = [2, 3, 5, 7, 11, 13].map(function (id) {
//   return new Promise2(function(resolve,reject){
//     setTimeout(()=>{
//         resolve(id);
//     },id);
//   })
// });

// promises.unshift('ddd');

// Promise2.race(promises).then(res=>{
//   console.log(res)
// })
     

// var p1 = new Promise2(function(resolve,reject){
//     resolve('p1')
// });

// var p2 = new Promise2(function(resolve,reject){
//     resolve('p2')
// });

// p1.then(()=>{
//     console.log('p11')
// }).then(()=>{
//     console.log('p12')
// })

// p2.then(()=>{
//     console.log('p21')
// }).then(()=>{
//     console.log('p22')
// })

// 多个resolve测试

// var p1 = new Promise2(function(resolve){
//     resolve('ddd')
//     resolve('ttt')
// })

// p1.then(function(value){
//     console.log(value)
// })

// 多个then 测试

// var p1 = new Promise(function(resolve){
//     resolve('ddd')
// })

// p1.then(function(value){
//     console.log(value)
// })

// p1.then(function(value){
//     console.log(value)
// })


/*return Promise()*/
 
let p1 = function (){
   return new Promise(function(resolve,reject){
        setTimeout(()=>{
            resolve('p1')
        },200)
    })
}

let p2 = function() {
  return  new Promise2(function(resolve,reject){
        setTimeout(()=>{
            reject('p2')
        },200)
    })
}

p1().then(function(){
    return p2().then(value=>{
         console.log(`ddd--${value}`)
     })
}).catch(value=>{
    console.log(value)
})


</script>
</html>